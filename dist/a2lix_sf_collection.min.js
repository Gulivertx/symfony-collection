"use strict";const a2lix_lib={};a2lix_lib.sfCollection=(()=>{const t=(t={})=>{if(!("content"in document.createElement("template"))){console.error("HTML template will not working...");return}const{collectionsSelector:n="form div[data-prototype]",manageRemoveEntry:r=true,lang:a={add:"Add",remove:"Remove"},afterAdd:o=null,afterRemove:l=null,maxElements:i=null}=t;const d=document.querySelectorAll(n);if(!d.length){return}d.forEach(t=>{e(t,r,a,o,l,i)})};const e=(t,e=false,o,l,i,d)=>{t.setAttribute("data-entry-index",t.children.length);n(t,o);if(e){r(t,o)}t.addEventListener("click",t=>a(t,e,o,l,i,d))};const n=(t,e)=>{const n=t.getAttribute("data-entry-add-label")||"",r=t.getAttribute("data-entry-add-class")||"btn btn-primary btn-sm mt-2";const a=i(`${e.add} ${n}`,"add",`${r}`);t.appendChild(a)};const r=(t,e)=>{const n=t.getAttribute("data-entry-remove-label")||"",r=t.getAttribute("data-entry-remove-class")||"btn btn-danger btn-sm";const a=i(`${e.remove} ${n}`,"remove",`${r}`);const o=[...t.children].filter(t=>!t.hasAttribute("data-entry-action")).forEach(t=>{t.appendChild(a.cloneNode(true))})};const a=(t,e,n,r,a,i)=>{if(!t.target.hasAttribute("data-entry-action")){return}switch(t.target.getAttribute("data-entry-action")){case"add":o(t.currentTarget,t.target,e,n,r,i);break;case"remove":l(t.currentTarget,t.target,a,i);break}};const o=(t,e,n,r,a,o)=>{const l=t.getAttribute("data-entry-index");t.setAttribute("data-entry-index",+l+1);const c=t.getAttribute("data-prototype"),s=d(c,l);if(n){const e=t.getAttribute("data-entry-remove-label")||"",n=t.getAttribute("data-entry-remove-class")||"btn btn-danger btn-sm",a=i(`${r.remove} ${e}`,"remove",`${n}`);s.firstChild.appendChild(a)}if(a!==null)a(t,s.firstChild);e.disabled=o&&+l+1===o;e.parentElement.insertBefore(s,e)};const l=(t,e,n,r)=>{const a=t.getAttribute("data-entry-index");t.setAttribute("data-entry-index",+a-1);e.parentElement.remove();if(+a-1<r){const e=t.getElementsByTagName("button");for(let t of e){if(t.dataset.entryAction==="add")t.disabled=false}}if(n!==null)n(t,e.parentElement)};const i=(t,e,n="btn")=>{const r=document.createElement("button");r.type="button";r.textContent=t;r.className=n;r.dataset.entryAction=e;return r};const d=(t,e)=>{const n=document.createElement("template");const r=t.replace(/__name__label__/g,`!New! ${e}`).replace(/__name__/g,e);n.innerHTML=r.trim();return n.content};return{init:t}})();export default a2lix_lib;